<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Y-lib: y_logging.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Y-lib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">y_logging.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Logging-related y-lib functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="y__core_8c.html">y_core.c</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="y__loadrunner__utils_8c.html">y_loadrunner_utils.c</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af5f7233cc156519f399367ba558adba8"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#af5f7233cc156519f399367ba558adba8">y_make_datetimestamp</a> (<a class="el" href="group__time.html#ga824afaa48b313f905546cf45822800fc">time_t</a> <a class="el" href="group__time.html#ga8038cf2bfae47bdf6942741c58a2c530">time</a>, unsigned short millitm)</td></tr>
<tr class="memdesc:af5f7233cc156519f399367ba558adba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a unixtime style timestamp to a date and time represented as YYYY-MM-DD HH:MM:SS.mmm.  <a href="#af5f7233cc156519f399367ba558adba8">More...</a><br/></td></tr>
<tr class="separator:af5f7233cc156519f399367ba558adba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b402b9377251d1b78db7507c76fd886"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a9b402b9377251d1b78db7507c76fd886">y_get_datetimestamp</a> ()</td></tr>
<tr class="memdesc:a9b402b9377251d1b78db7507c76fd886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current time converted represented as YYYY-MM-DD HH:MM:SS.mmm.  <a href="#a9b402b9377251d1b78db7507c76fd886">More...</a><br/></td></tr>
<tr class="separator:a9b402b9377251d1b78db7507c76fd886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad22b9fb4ae6f4a47b69cd37b9f33ceff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#ad22b9fb4ae6f4a47b69cd37b9f33ceff">y_setup_logging</a> ()</td></tr>
<tr class="memdesc:ad22b9fb4ae6f4a47b69cd37b9f33ceff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on 'extra logging', when available.  <a href="#ad22b9fb4ae6f4a47b69cd37b9f33ceff">More...</a><br/></td></tr>
<tr class="separator:ad22b9fb4ae6f4a47b69cd37b9f33ceff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a440898bcda285688344b7147e26ff5b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a440898bcda285688344b7147e26ff5b7">y_log_to_report</a> (char *message)</td></tr>
<tr class="memdesc:a440898bcda285688344b7147e26ff5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">If extra logging was enabled force a line to be logged to the logfile - even if regular logging was turned off. Enable extra logging by calling <a class="el" href="y__logging_8c.html#ad22b9fb4ae6f4a47b69cd37b9f33ceff" title="Turn on &#39;extra logging&#39;, when available. ">y_setup_logging()</a>  <a href="#a440898bcda285688344b7147e26ff5b7">More...</a><br/></td></tr>
<tr class="separator:a440898bcda285688344b7147e26ff5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9699f5d59ff8a52ff94352d41b033ea5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a9699f5d59ff8a52ff94352d41b033ea5">y_log_error</a> (char *message)</td></tr>
<tr class="memdesc:a9699f5d59ff8a52ff94352d41b033ea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log an error message, with a timestamp, if extra logging is enabled.  <a href="#a9699f5d59ff8a52ff94352d41b033ea5">More...</a><br/></td></tr>
<tr class="separator:a9699f5d59ff8a52ff94352d41b033ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace528d55b1ad1149709aaaadb00730ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#ace528d55b1ad1149709aaaadb00730ae">y_log_warning</a> (char *message)</td></tr>
<tr class="memdesc:ace528d55b1ad1149709aaaadb00730ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a warning, with a timestamp, if extra logging is enabled.  <a href="#ace528d55b1ad1149709aaaadb00730ae">More...</a><br/></td></tr>
<tr class="separator:ace528d55b1ad1149709aaaadb00730ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168c850ea18a4c7201ea9816337729aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a168c850ea18a4c7201ea9816337729aa">y_log_save</a> ()</td></tr>
<tr class="memdesc:a168c850ea18a4c7201ea9816337729aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the loglevel for later restoration through <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a>.  <a href="#a168c850ea18a4c7201ea9816337729aa">More...</a><br/></td></tr>
<tr class="separator:a168c850ea18a4c7201ea9816337729aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc385840588ec59b6d002d755b0e0415"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#afc385840588ec59b6d002d755b0e0415">y_log_turn_off_without_saving</a> ()</td></tr>
<tr class="memdesc:afc385840588ec59b6d002d755b0e0415"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force all logging off unconditionally, without saving the old state.  <a href="#afc385840588ec59b6d002d755b0e0415">More...</a><br/></td></tr>
<tr class="separator:afc385840588ec59b6d002d755b0e0415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fdf23d9bb8acc2375d3680976336e3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a0fdf23d9bb8acc2375d3680976336e3a">y_log_turn_off</a> ()</td></tr>
<tr class="memdesc:a0fdf23d9bb8acc2375d3680976336e3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the current loglevel and turn off logging.  <a href="#a0fdf23d9bb8acc2375d3680976336e3a">More...</a><br/></td></tr>
<tr class="separator:a0fdf23d9bb8acc2375d3680976336e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae92fd3a1d985c02c4d630dd1af17580b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#ae92fd3a1d985c02c4d630dd1af17580b">y_log_turn_off_permanently</a> ()</td></tr>
<tr class="memdesc:ae92fd3a1d985c02c4d630dd1af17580b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn all logging off and make sure it stays that way.  <a href="#ae92fd3a1d985c02c4d630dd1af17580b">More...</a><br/></td></tr>
<tr class="separator:ae92fd3a1d985c02c4d630dd1af17580b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5edd02a051826b8871ddacb48fa3bb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#ac5edd02a051826b8871ddacb48fa3bb7">y_log_set_brief</a> ()</td></tr>
<tr class="memdesc:ac5edd02a051826b8871ddacb48fa3bb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the log level to "brief" messages only.  <a href="#ac5edd02a051826b8871ddacb48fa3bb7">More...</a><br/></td></tr>
<tr class="separator:ac5edd02a051826b8871ddacb48fa3bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cca27937c3caa6dbcfa8d5c5b3894cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a7cca27937c3caa6dbcfa8d5c5b3894cc">y_log_set_extended</a> ()</td></tr>
<tr class="memdesc:a7cca27937c3caa6dbcfa8d5c5b3894cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the log level to show all messages, including extended result data, parameters, and tracing information.  <a href="#a7cca27937c3caa6dbcfa8d5c5b3894cc">More...</a><br/></td></tr>
<tr class="separator:a7cca27937c3caa6dbcfa8d5c5b3894cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9704bca5562196d581411d31fcc690f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0">y_log_restore</a> ()</td></tr>
<tr class="memdesc:a9704bca5562196d581411d31fcc690f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before the last call to y_log_set_{off|on|brief|extended}() or <a class="el" href="y__logging_8c.html#a168c850ea18a4c7201ea9816337729aa" title="Save the loglevel for later restoration through y_log_restore(). ">y_log_save()</a>.  <a href="#a9704bca5562196d581411d31fcc690f0">More...</a><br/></td></tr>
<tr class="separator:a9704bca5562196d581411d31fcc690f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945fff57d0f423529adf29ec8efc1e6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a945fff57d0f423529adf29ec8efc1e6a">y_log_turn_on</a> ()</td></tr>
<tr class="memdesc:a945fff57d0f423529adf29ec8efc1e6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn logging on.  <a href="#a945fff57d0f423529adf29ec8efc1e6a">More...</a><br/></td></tr>
<tr class="separator:a945fff57d0f423529adf29ec8efc1e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d19e56f169b8181a349e5219264731"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#ad9d19e56f169b8181a349e5219264731">y_log_force_message</a> (char *message)</td></tr>
<tr class="memdesc:ad9d19e56f169b8181a349e5219264731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a message forcefully, bypassing the current log settings.  <a href="#ad9d19e56f169b8181a349e5219264731">More...</a><br/></td></tr>
<tr class="separator:ad9d19e56f169b8181a349e5219264731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd38a10a5e25caf792c6c6c5be68ab5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#acd38a10a5e25caf792c6c6c5be68ab5e">y_write_to_log</a> (char *filename, char *content)</td></tr>
<tr class="memdesc:acd38a10a5e25caf792c6c6c5be68ab5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a string prepended with date and time to the specified (log)file.  <a href="#acd38a10a5e25caf792c6c6c5be68ab5e">More...</a><br/></td></tr>
<tr class="separator:acd38a10a5e25caf792c6c6c5be68ab5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfccbf59127c2e9106022bb3b4dc8329"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#adfccbf59127c2e9106022bb3b4dc8329">y_disk_space_guard</a> (double max_free_percentage)</td></tr>
<tr class="memdesc:adfccbf59127c2e9106022bb3b4dc8329"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect low disk space situations on the generator and turn all logging off if not enough space is left.  <a href="#adfccbf59127c2e9106022bb3b4dc8329">More...</a><br/></td></tr>
<tr class="separator:adfccbf59127c2e9106022bb3b4dc8329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a516cb215f2125635444363eeb2eb8803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="y__logging_8c.html#a516cb215f2125635444363eeb2eb8803">y_disk_space_usage_guard</a> (double limit_mebibytes_used)</td></tr>
<tr class="memdesc:a516cb215f2125635444363eeb2eb8803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect excessive disk usage by the test and turn all further logging off if more than a specific limit number of mebibytes has been used.  <a href="#a516cb215f2125635444363eeb2eb8803">More...</a><br/></td></tr>
<tr class="separator:a516cb215f2125635444363eeb2eb8803"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Logging-related y-lib functions. </p>
<p>Note that some of these are a bit marginal - the disk space guards for instance are logging related in the sense that they will turn all logging off when too much disk space has been used, but they aren't exactly log manipulation functions in the low-level sense. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="adfccbf59127c2e9106022bb3b4dc8329"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_disk_space_guard </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_free_percentage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect low disk space situations on the generator and turn all logging off if not enough space is left. </p>
<p>When called, this function will check the amount of space left on the generator's "output" device / directory. If the percentage of free space is lower than the treshold percentage, it will generate an error transaction "---DISK SPACE LOW IN LOG FOLDER FOR {y_hostname_generator}---" and turn all further logging off until the end of the test, using <a class="el" href="y__logging_8c.html#ae92fd3a1d985c02c4d630dd1af17580b" title="Turn all logging off and make sure it stays that way. ">y_log_turn_off_permanently()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Scripts that call lr_debug_message() or the various y_lib() toggle functions to turn the loglevel back up may ignore this restriction.</dd></dl>
<p>Loadrunner does not protect the generators' disks from overflowing, even if the test is writing out a lot of information to the logs really quickly. If a disk fills up on the generator or the disk the controller uses for results collation overflows there is no graceful recovery. Collation will fail and test results may be hard or impossible to recover. This kind of situation can occur when temporary service disruptions happen (triggering a flood of 'log on error' messages), but also if runtime settings are incorrect and the test was configured to log <em>everything</em>.</p>
<p>In order to prevent this from happening scripts should regularly call to both <a class="el" href="y__logging_8c.html#adfccbf59127c2e9106022bb3b4dc8329" title="Detect low disk space situations on the generator and turn all logging off if not enough space is lef...">y_disk_space_guard()</a> and <a class="el" href="y__logging_8c.html#a516cb215f2125635444363eeb2eb8803" title="Detect excessive disk usage by the test and turn all further logging off if more than a specific limi...">y_disk_space_usage_guard()</a> with some reasonable limits.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">max_free_percentage</td><td>The amount of free diskspace as a percentage of total space that will cause the logging to turn off.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a516cb215f2125635444363eeb2eb8803"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_disk_space_usage_guard </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>limit_mebibytes_used</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect excessive disk usage by the test and turn all further logging off if more than a specific limit number of mebibytes has been used. </p>
<p>When called, this function will check the amount of space used on the generator's "output" device / directory since the first call to this function. If the amount of used space exceeds the treshold it will generate an error transaction "---DISK SPACE LOW IN LOG FOLDER FOR {y_hostname_generator}---" and turn all further logging off until the end of the test, using <a class="el" href="y__logging_8c.html#ae92fd3a1d985c02c4d630dd1af17580b" title="Turn all logging off and make sure it stays that way. ">y_log_turn_off_permanently()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Scripts that call lr_debug_message() or the various y_lib() toggle functions to turn the loglevel back up may ignore this restriction.</dd></dl>
<p>Loadrunner does not protect the generators' disks from overflowing, even if the test is writing out a lot of information to the logs really quickly. If a disk fills up on the generator or the disk the controller uses for results collation overflows there is no graceful recovery. Collation will fail and test results may be hard or impossible to recover. This kind of situation can occur when temporary service disruptions happen (triggering a flood of 'log on error' messages), but also if runtime settings are incorrect and the test was configured to log <em>everything</em>.</p>
<dl class="section note"><dt>Note</dt><dd>Because of the way this measurement is done, it may also trigger if some other process on the same machine starts writing large amounts of data to the same device.</dd></dl>
<p>In order to prevent this from happening scripts should regularly call to both <a class="el" href="y__logging_8c.html#adfccbf59127c2e9106022bb3b4dc8329" title="Detect low disk space situations on the generator and turn all logging off if not enough space is lef...">y_disk_space_guard()</a> and <a class="el" href="y__logging_8c.html#a516cb215f2125635444363eeb2eb8803" title="Detect excessive disk usage by the test and turn all further logging off if more than a specific limi...">y_disk_space_usage_guard()</a> with some reasonable limits.</p>
<dl class="section note"><dt>Note</dt><dd>The contents of the generator's output folder will be transferred to the controller during collation. If the sum of the output directories for the generators exceed the size of that filesystem collation will fail, even if there is enough space on the generators. Therefore, set this low enough to make sure that if all generators output folders get filled to the limit the controller will still have enough space for it's collation process.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">limit_mebibytes_used</td><td>The amount of mebibytes the test is allowed to used on the generator's target directory.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a9b402b9377251d1b78db7507c76fd886"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* y_get_datetimestamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current time converted represented as YYYY-MM-DD HH:MM:SS.mmm. </p>
<dl class="section return"><dt>Returns</dt><dd>The string represation of the current time, formatted as YYYY-MM-DD HH:MM:SS.mmm.</dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000009">Deprecated:</a></b></dt><dd>Use lr_save_datetime() or direct <a class="el" href="group__time.html#gafc0d3a1676a915f3cedcad79759f6802" title="Documented at http://www.qnx.com/developers/docs/6.5.0/topic/com.qnx.doc.neutrino_lib_ref/f/ftime.html . ">ftime()</a> calls instead.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="y__logging_8c.html#af5f7233cc156519f399367ba558adba8" title="Convert a unixtime style timestamp to a date and time represented as YYYY-MM-DD HH:MM:SS.mmm. ">y_make_datetimestamp()</a>, <a class="el" href="group__loadrunner__utils.html#ga17b08587d9d4bead3865b4778bda878b" title="Get the current time in seconds since 1970, as a double. ">y_get_current_time()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a9699f5d59ff8a52ff94352d41b033ea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_error </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log an error message, with a timestamp, if extra logging is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The error message to be logged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000012">Deprecated:</a></b></dt><dd>Forcing your error messages to get logged may not be the best idea there is. And I don't know of anyone using this, either. <dl class="section see"><dt>See Also</dt><dd><a class="el" href="y__logging_8c.html#a440898bcda285688344b7147e26ff5b7" title="If extra logging was enabled force a line to be logged to the logfile - even if regular logging was t...">y_log_to_report()</a> </dd></dl>
</dd></dl>

</div>
</div>
<a class="anchor" id="ad9d19e56f169b8181a349e5219264731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_force_message </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log a message forcefully, bypassing the current log settings. </p>
<p>Typically used for generating datafiles within scripts with the loglevel set to OFF, or things of that sort.</p>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line">lr_set_debug_message(LR_MSG_CLASS_DISABLE_LOG, LR_SWITCH_ON);</div>
<div class="line">lr_set_debug_message(LR_MSG_CLASS_AUTO_LOG, LR_SWITCH_OFF);</div>
<div class="line">lr_log_message(<span class="stringliteral">&quot;Before&quot;</span>);              <span class="comment">// Nothing gets logged here.</span></div>
<div class="line"><a class="code" href="y__logging_8c.html#ad9d19e56f169b8181a349e5219264731">y_log_force_message</a>(<span class="stringliteral">&quot;Forced message&quot;</span>); <span class="comment">// &quot;Forced message&quot; appears in the logs.</span></div>
<div class="line">lr_log_message(<span class="stringliteral">&quot;After&quot;</span>);               <span class="comment">// No output again.</span></div>
</div><!-- fragment --> <dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a9704bca5562196d581411d31fcc690f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_restore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before the last call to y_log_set_{off|on|brief|extended}() or <a class="el" href="y__logging_8c.html#a168c850ea18a4c7201ea9816337729aa" title="Save the loglevel for later restoration through y_log_restore(). ">y_log_save()</a>. </p>
<dl class="section note"><dt>Note</dt><dd>Multiple calls to y_log_set_* functions in a row will overwrite the previous saved state, making the first state potentially unrecoverable.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a168c850ea18a4c7201ea9816337729aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_save </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the loglevel for later restoration through <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a>. </p>
<p>This is called by the various y_log_* functions to make sure the loglevel can be put back the way it was.</p>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="ac5edd02a051826b8871ddacb48fa3bb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_set_brief </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the log level to "brief" messages only. </p>
<dl class="section note"><dt>Note</dt><dd>Calling <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a> will restore the loglevel to the state it was in before this call.</dd></dl>
<p>Useful when you want to, say, not see that big PDF you are downloading somewhere in your logs but <em>do</em> want to see the rest of the logging. </p>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a7cca27937c3caa6dbcfa8d5c5b3894cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_set_extended </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the log level to show all messages, including extended result data, parameters, and tracing information. </p>
<dl class="section note"><dt>Note</dt><dd>Calling <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a> will restore the loglevel to the state it was in before this call.</dd></dl>
<p>Useful when you want to debug a particular step in the script.</p>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a440898bcda285688344b7147e26ff5b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_to_report </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If extra logging was enabled force a line to be logged to the logfile - even if regular logging was turned off. Enable extra logging by calling <a class="el" href="y__logging_8c.html#ad22b9fb4ae6f4a47b69cd37b9f33ceff" title="Turn on &#39;extra logging&#39;, when available. ">y_setup_logging()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The message to be logged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000011">Deprecated:</a></b></dt><dd>Logging with a timestamp sounds useful, but I don't think it should be called "y_log_to_report()", and it is rather customer specific, too. Also, forced logging really should be it's own thing.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="y__logging_8c.html#ad22b9fb4ae6f4a47b69cd37b9f33ceff" title="Turn on &#39;extra logging&#39;, when available. ">y_setup_logging()</a>, <a class="el" href="y__logging_8c.html#ad9d19e56f169b8181a349e5219264731" title="Log a message forcefully, bypassing the current log settings. ">y_log_force_message()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a0fdf23d9bb8acc2375d3680976336e3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_turn_off </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the current loglevel and turn off logging. </p>
<dl class="section note"><dt>Note</dt><dd>Calling <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a> will restore the loglevel to the state it was in before this call.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="ae92fd3a1d985c02c4d630dd1af17580b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_turn_off_permanently </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn all logging off and make sure it stays that way. </p>
<p>This will overwrite the state saved by <a class="el" href="y__logging_8c.html#a168c850ea18a4c7201ea9816337729aa" title="Save the loglevel for later restoration through y_log_restore(). ">y_log_save()</a> with "No logging at all, please.", so that <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a> can't turn things back on.</p>
<dl class="section note"><dt>Note</dt><dd>Direct calls to lr_set_debug_message() will still be able to turn things back on. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Mixing calls to y_log_* functions with calls to lr_debug_message() is not wise and may yield unpredictable results.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="afc385840588ec59b6d002d755b0e0415"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_turn_off_without_saving </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force all logging off unconditionally, without saving the old state. </p>
<p>This is used by various y_log_* functions to get the loglevel to a known state.</p>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="a945fff57d0f423529adf29ec8efc1e6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_turn_on </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn logging on. </p>
<p>What this function does depends on the saved loglevel.</p>
<ul>
<li>If the saved loglevel was "no logging", <a class="el" href="y__logging_8c.html#a7cca27937c3caa6dbcfa8d5c5b3894cc" title="Set the log level to show all messages, including extended result data, parameters, and tracing information. ">y_log_set_extended()</a> is called, turning all logging on.</li>
<li>Otherwise, <a class="el" href="y__logging_8c.html#a9704bca5562196d581411d31fcc690f0" title="Restore the loglevel to previous state. To be exact, it will restore it to the state it was in before...">y_log_restore()</a> is called to undo the previous loglevel change.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If the previous loglevel was "brief" while the current level is "extended", this may result in <em>less</em> logging. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Either fix that, or remove this function.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Floris Kraak </dd></dl>

</div>
</div>
<a class="anchor" id="ace528d55b1ad1149709aaaadb00730ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_log_warning </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log a warning, with a timestamp, if extra logging is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The error message to be logged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000013">Deprecated:</a></b></dt><dd>Unused, and forcibly logging things even if logging is turned off is rather impolite to begin with ;-) <dl class="section see"><dt>See Also</dt><dd><a class="el" href="y__logging_8c.html#a440898bcda285688344b7147e26ff5b7" title="If extra logging was enabled force a line to be logged to the logfile - even if regular logging was t...">y_log_to_report()</a> </dd></dl>
</dd></dl>

</div>
</div>
<a class="anchor" id="af5f7233cc156519f399367ba558adba8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* y_make_datetimestamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__time.html#ga824afaa48b313f905546cf45822800fc">time_t</a>&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>millitm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a unixtime style timestamp to a date and time represented as YYYY-MM-DD HH:MM:SS.mmm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>- the unix time stamp, as reported by <a class="el" href="group__time.html#gafc0d3a1676a915f3cedcad79759f6802" title="Documented at http://www.qnx.com/developers/docs/6.5.0/topic/com.qnx.doc.neutrino_lib_ref/f/ftime.html . ">ftime()</a> </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">millitm</td><td>- the milliseconds belonging to the time stamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string represation of the timestamp, formatted as YYYY-MM-DD HH:MM:SS.mmm.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="y__logging_8c.html#a9b402b9377251d1b78db7507c76fd886" title="Returns the current time converted represented as YYYY-MM-DD HH:MM:SS.mmm. ">y_get_datetimestamp()</a>, <a class="el" href="group__loadrunner__utils.html#ga17b08587d9d4bead3865b4778bda878b" title="Get the current time in seconds since 1970, as a double. ">y_get_current_time()</a></dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000008">Deprecated:</a></b></dt><dd>lr_save_datetime() really should be used for this kind of thing. </dd></dl>

</div>
</div>
<a class="anchor" id="ad22b9fb4ae6f4a47b69cd37b9f33ceff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void y_setup_logging </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on 'extra logging', when available. </p>
<p>This is one of the remnants of a bit of old code that would log every transaction stop/start with a timestamp, so that post-test-analysis of responstimes could be done with custom tools. Unless you are running a very old y-lib based script there is no reason why you should use this, as y_set_start_transaction_impl() and y_set_end_transaction_impl() should give you the tools you need to do something like that without polluting y-lib with it ;-)</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000010">Deprecated:</a></b></dt><dd>This will probably be removed in favor of y_set_transaction_implementation(), which is really how this kind of extra transaction logging should be done. Note that <a class="el" href="y__transaction_8c.html" title="ylib transaction library. ">y_transaction.c</a> hasn't used the extra logging stuff in some time ..</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="y__logging_8c.html#a440898bcda285688344b7147e26ff5b7" title="If extra logging was enabled force a line to be logged to the logfile - even if regular logging was t...">y_log_to_report()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="acd38a10a5e25caf792c6c6c5be68ab5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int y_write_to_log </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a string prepended with date and time to the specified (log)file. </p>
<p>The logged line will have the following format: YYYYMM,DDHHmmss,{y_virtual_user_group},{y_virtual_user_id},{y_scid},{content}</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>The file name of the target file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">content</td><td>The logmessage to be written. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Negative number in case of an error, zero otherwise.</dd></dl>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a class="code" href="y__logging_8c.html#acd38a10a5e25caf792c6c6c5be68ab5e">y_write_to_log</a>(<span class="stringliteral">&quot;c:\\logfile.txt&quot;</span>, <span class="stringliteral">&quot;Everything went great&quot;</span>);</div>
</div><!-- fragment --><p><b>Example</b> <b>output:</b> 20091126,215212,SomeGroup,3,4,Everything went great</p>
<dl class="section author"><dt>Author</dt><dd>Raymond de Jongh </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 2 2015 16:29:22 for Y-lib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
